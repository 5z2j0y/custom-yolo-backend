services:
  yolo:
    container_name: yolo
    build:
      context: .
    environment:
      # specify these parameters if you want to use basic auth for the model server
      - BASIC_AUTH_USER=
      - BASIC_AUTH_PASS=
      # set the log level for the model server
      - LOG_LEVEL=DEBUG
      # specify the model directory (likely you don't need to change this)
      - MODEL_DIR=./models
      - PYTHONPATH=/app

      # Specify the Label Studio URL and API key to access
      # Determine the actual IP using 'ifconfig' (Linux/Mac) or 'ipconfig' (Windows).

      # LABEL_STUDIO_URL=<IPv4 Address> (check your ipconfig)
      # LABEL_STUDIO_API_KEY=<Label Studio API token>
      # TASK_TYPE=<segmentation> or <detection>
      - LABEL_STUDIO_URL=http://host.docker.internal:8080
      - LABEL_STUDIO_API_KEY=1cbf62539c32cea6ec862d97643f8651fc668c6f
      - TASK_TYPE=detection

    ports:
      - "9090:9090"
    volumes:
      - "./data/server:/data"

    develop:
      watch:
        - action: rebuild
          path: ./model.py
          target: /app/model.py
          